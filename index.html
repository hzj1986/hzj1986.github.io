<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>影视TV</title>
    <link rel="stylesheet" href="css/tailwind.min.css">
    <link rel="stylesheet" href="css/swiper-bundle.min.css" />
    <link rel="icon" href="./img/img_1.png">
    <script src="js/swiper-bundle.min.js"></script>
    <script src="js/sweetalert2.all.min.js"></script>
    <link href="css/sweetalert2.min.css" rel="stylesheet" />
    <script src="js/axios.min.js"></script>
</head>

<body class="bg-gray-200 text-gray-800">
    <!-- 导航栏 -->
    <nav class="bg-white shadow-lg">
        <div class="container mx-auto flex justify-between py-4 px-8">
            <!-- 左边首页链接 -->
            <a href="index.html" class="text-xl font-bold">首页</a>
            <!-- 右边导航 -->
            <div class="space-x-4">
                <a href="https://t.me/fongmi_offical"
                    class="transition-all duration-150 text-gray-700 hover:text-blue-500" target="_blank">TG频道</a>
                <a href="https://t.me/fongmi_offical/54024"
                    class="transition-all duration-150 text-gray-700 hover:text-blue-500" target="_blank">电报群</a>
                <a href="https://t.me/fongmi_release"
                    class="transition-all duration-150 text-gray-700 hover:text-blue-500" target="_blank">订阅</a>
                <a href="https://github.com/FongMi/TV"
                    class="transition-all duration-150 text-gray-700 hover:text-blue-500" target="_blank">源码</a>
            </div>
        </div>
    </nav>

    <!-- 容器 -->
    <div class="container mx-auto mt-8">
        <div class="flex flex-col md:flex-row">
            <!-- 左边文字 -->
            <div class="w-full md:w-1/3 p-8 flex flex-col justify-center">
                <img class="w-1/3 mx-auto float-right" src="./img/img_1.png" alt="Card Image"
                    style="width:100px;height:100px;"><br />
                <h2 class="text-center text-4xl font-bold mb-4">影视TV</h2>
                <p class="text-center">『开源免费、广告切片』</p>
                <p class="text-center">『高清直播、视频投屏』</p>
                <p class="text-center">『支持多仓、自动换源』</p>
                <p class="text-center">『轨道切换、记忆播放』</p>
                <p class="text-center">『片头片尾、快捷标记』</p>
                <p class="text-center">『语音搜索、同步记录』</p>
                <!-- 按钮行 1 -->
                <div class="flex mt-4 justify-center">
                    <a href="#download" title="点击下载影视APP"
                        class="text-center bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded">
                        <img class="w-1/3 mx-auto float-left" src="./img/download.png" alt="Card Image"
                            style="width:30px;height:25px;">下载安装包</a>
                </div>
            </div>
            <!-- 右边展示图 -->
            <div class="w-full md:w-2/3 p-8 relative">
                <div class="swiper-container overflow-hidden">
                    <div class="swiper-wrapper">
                        <div class="swiper-slide">
                            <img src="./img/ys01.png" alt="Image 1" class="w-full rounded-lg">
                        </div>
                        <div class="swiper-slide">
                            <img src="./img/ys02.png" alt="Image 2" class="w-full rounded-lg">
                        </div>
                        <div class="swiper-slide">
                            <img src="./img/ys03.png" alt="Image 3" class="w-full rounded-lg">
                        </div>
                        <div class="swiper-slide">
                            <img src="./img/ys04.png" alt="Image 4" class="w-full rounded-lg">
                        </div>
                    </div>
                    <!-- Add Pagination -->
                    <div class="swiper-pagination absolute bottom-4 left-1/2 transform -translate-x-1/2"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="container mx-auto mt-8 bg-white rounded-lg border border-gray-300 p-4">
        <p>影视是一款基于猫影视开源的CatVodTVJarLoader项目，从零开始写。非常简洁清爽且功能强大。界面上采用 Android TV Leanback
            架构，播放器采用最新版EXO及IJK开源专案的智能电视软件，使用体验感舒适，支持电视直播功能，界面非常简洁，没有花里胡哨的内容，用户只需要配置相关地址（接口）就可以使用。
        </p>
    </div>

    </div>

    <div class="container mx-auto mt-8 bg-white rounded-lg border border-gray-300 p-4" style="text-align:center;">
        <h2 class="text-center text-3xl font-bold my-4">点击头像复制配置地址⬇️⬇️⬇️️️<a href="https://www.lige.fit/ua"
                class="transition-all duration-150 text-3xl text-blue-700 hover:text-blue-500"
                target="_blank">『在线源解析』</a></h2>
    </div>
    <!-- 卡片列表 -->
    <div class="container mx-auto mt-8">
        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-8">
            <!-- 卡片 1 -->
            <div data-config="https://ghproxy.com/raw.githubusercontent.com/yangxiaoge/TVBoxOSC_workflow/master/tvbox/多仓1.json"
                class="hover:bg-gray-200 transition-all duration-150 bg-white shadow rounded-lg p-4 cursor-pointer flex flex-col justify-center items-center">
                <img class="w-1/3 mx-auto" src="./img/xiaoyang.png" alt="Card Image">
                <p class="text-center mt-2">小羊多仓</p>
            </div>
            <!-- 卡片 2 -->
            <div data-config="https://ghproxy.com/raw.githubusercontent.com/FongMi/CatVodSpider/main/json/config.json"
                class="hover:bg-gray-200 transition-all duration-150 bg-white shadow rounded-lg p-4 cursor-pointer flex flex-col justify-center items-center">
                <img class="w-1/3 mx-auto" src="./img/fm.png" alt="Card Image">
                <p class="text-center mt-2">FongMi</p>
            </div>
            <!-- 卡片 3 -->
            <div data-config="http://我不是.肥猫.love:63/接口禁止贩卖"
                class="hover:bg-gray-200 transition-all duration-150 bg-white shadow rounded-lg p-4 cursor-pointer flex flex-col justify-center items-center">
                <img class="w-1/3 mx-auto" src="./img/mm.png" alt="Card Image">
                <p class="text-center mt-2">肥猫</p>
            </div>
            <!-- 卡片 4 -->
            <div data-config="https://gh.t4tv.hz.cz/newtang.bmp"
                class="hover:bg-gray-200 transition-all duration-150 bg-white shadow rounded-lg p-4 cursor-pointer flex flex-col justify-center items-center">
                <img class="w-1/3 mx-auto" src="./img/ts.png" alt="Card Image">
                <p class="text-center mt-2">唐三</p>
            </div>
            <!-- 卡片 5 -->
            <div data-config="https://ghproxy.com/raw.githubusercontent.com/lm317379829/PyramidStore/pyramid/py.json"
                class="hover:bg-gray-200 transition-all duration-150 bg-white shadow rounded-lg p-4 cursor-pointer flex flex-col justify-center items-center">
                <img class="w-1/3 mx-auto" src="./img/yy.png" alt="Card Image">
                <p class="text-center mt-2">霜辉月明</p>
            </div>
            <!-- 卡片 6 -->
            <div data-config="https://xhdwc.tk/0"
                class="hover:bg-gray-200 transition-all duration-150 bg-white shadow rounded-lg p-4 cursor-pointer flex flex-col justify-center items-center">
                <img class="w-1/3 mx-auto" src="./img/ray.png" alt="Card Image">
                <p class="text-center mt-2">Ray</p>
            </div>
            <!-- 卡片 7 -->
            <div data-config="http://饭太硬.top/tv"
                class="hover:bg-gray-200 transition-all duration-150 bg-white shadow rounded-lg p-4 cursor-pointer flex flex-col justify-center items-center">
                <img class="w-1/3 mx-auto" src="./img/ff.png" alt="Card Image">
                <p class="text-center mt-2">饭太硬</p>
            </div>
            <!-- 卡片 8 -->
            <div data-config="http://home.jundie.top:81/top98.json"
                class="hover:bg-gray-200 transition-all duration-150 bg-white shadow rounded-lg p-4 cursor-pointer flex flex-col justify-center items-center">
                <img class="w-1/3 mx-auto" src="./img/12.png" alt="Card Image">
                <p class="text-center mt-2">俊佬</p>
            </div>
            <!-- 卡片 9 -->
            <div data-config="http://drpy.site/js1"
                class="hover:bg-gray-200 transition-all duration-150 bg-white shadow rounded-lg p-4 cursor-pointer flex flex-col justify-center items-center">
                <img class="w-1/3 mx-auto" src="./img/xy.png" alt="Card Image">
                <p class="text-center mt-2">小雅</p>
            </div>
            <!-- 卡片 10 -->
            <div data-config="https://raw.liucn.cc/box/m.json"
                class="hover:bg-gray-200 transition-all duration-150 bg-white shadow rounded-lg p-4 cursor-pointer flex flex-col justify-center items-center">
                <img class="w-1/3 mx-auto" src="./img/img_1.png" alt="Card Image">
                <p class="text-center mt-2">老刘备</p>
            </div>
            <!-- 卡片 11 -->
            <div data-config="https://ghproxy.com/raw.githubusercontent.com/gaotianliuyun/gao/master/9918.json"
                class="hover:bg-gray-200 transition-all duration-150 bg-white shadow rounded-lg p-4 cursor-pointer flex flex-col justify-center items-center">
                <img class="w-1/3 mx-auto" src="./img/img_1.png" alt="Card Image">
                <p class="text-center mt-2">高天18🈲</p>
            </div>
            <!-- 卡片 12 -->
            <div data-config="https://ghproxy.com/raw.githubusercontent.com/FongMi/CatVodSpider/main/json/adult.json"
                class="hover:bg-gray-200 transition-all duration-150 bg-white shadow rounded-lg p-4 cursor-pointer flex flex-col justify-center items-center">
                <img class="w-1/3 mx-auto" src="./img/img_1.png" alt="Card Image">
                <p class="text-center mt-2">蜂蜜18🈲</p>
            </div>
            <!-- 卡片 13 -->
            <div data-config="https://ghproxy.com/https://raw.githubusercontent.com/2hacc/TVBox/main/h/h.json"
                class="hover:bg-gray-200 transition-all duration-150 bg-white shadow rounded-lg p-4 cursor-pointer flex flex-col justify-center items-center">
                <img class="w-1/3 mx-auto" src="./img/img_1.png" alt="Card Image">
                <p class="text-center mt-2">二哈18🈲</p>
            </div>
        </div>
    </div>


    <div id="download" class="container mx-auto mt-8 bg-white border rounded-lg px-3 py-4">
        <ul class="max-h-64 overflow-auto"></ul>
    </div>


    <footer class="mt-8 bg-white text-black p-4 text-center">
        <p class="power">Powered By
            <!-- href="https://github.com/yangxiaoge/webpages" -->
            <a class="text-blue-500 hover:text-blue-700"
                target="_blank">BruceYang</a>
        </p>
    </footer>

</body>


<script>
    function getSize(bytesLen) {
        let unitCount = 0;
        let units = [' B', ' KB', ' MB', ' GB'];
        while (bytesLen > 1024) {
            bytesLen /= 1024;
            unitCount++;
        }
        return bytesLen.toFixed(2) + units[unitCount];
    }

    function getLocalTime(time) {
        const date = new Date(time); // 获取当前时间戳
        const YY = `${date.getFullYear()}`; // 获取年份
        // 获取月份，月份的返回值是 0-11，其中0对应1月，所以月份需要在原基础 + 1
        const MM = `${date.getMonth() + 1 < 10 ? `0${(date.getMonth() + 1)}` : date.getMonth() + 1}`;
        const DD = `${date.getDate() < 10 ? `0${date.getDate()}` : date.getDate()}`; // 获取当前日
        const hh = `${date.getHours() < 10 ? `0${date.getHours()}` : date.getHours()}`; // 获取当前小时数
        const mm = `${date.getMinutes() < 10 ? `0${date.getMinutes()}` : date.getMinutes()}`; // 获取当前分钟数
        const ss = `${date.getSeconds() < 10 ? `0${date.getSeconds()}` : date.getSeconds()}`; // 获取当前秒数
        // console.log(YY + "-" + MM + "-" + DD + " " + hh + ":" + mm + ":" + ss)
        return YY + "-" + MM + "-" + DD + " " + hh + ":" + mm + ":" + ss
    }

    function isRecommend(fileName) {
        var displayName = ""
        if (fileName.includes("python") && fileName.includes("arm64")) {
            displayName = "（推荐下载）"
        }
        // console.log("displayName="+displayName)
        return displayName
    }

    function getTemplate(name, url, size, time) {
        // github下载地址加速
        url = "https://ghproxy.com/" + url
        return `<li class="rounded-lg pl-2 pr-2 pt-1 hover:bg-gray-200 mb-3 pb-1 border-b text-blue-400 hover:text-blue-800 transition-all duration-100 grid grid-cols-3 md:grid-rows-1 grid-rows-2">
                    <span class="col-span-3 md:col-span-1">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 inline"><path stroke-linecap="round" stroke-linejoin="round" d="M9 3.75H6.912a2.25 2.25 0 00-2.15 1.588L2.35 13.177a2.25 2.25 0 00-.1.661V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18v-4.162c0-.224-.034-.447-.1-.661L19.24 5.338a2.25 2.25 0 00-2.15-1.588H15M2.25 13.5h3.86a2.25 2.25 0 012.012 1.244l.256.512a2.25 2.25 0 002.013 1.244h3.218a2.25 2.25 0 002.013-1.244l.256-.512a2.25 2.25 0 012.013-1.244h3.859M12 3v8.25m0 0l-3-3m3 3l3-3" /></svg>
                        <a href="${url}">${name}<a href="${url}" class="text-red-500">${isRecommend(name)}</a></a>
                    </span>
                    <span class="md:text-center col-span-2 md:col-span-1"><font color="#8a8a8a">${getSize(size)}</font></span>
                    <span class="text-right col-span-5 md:col-span-1"><font color="#8a8a8a">${getLocalTime(time)}</font></span>
                </li>`
    }

    // 方法一：查询项目目录release下的文件
    axios.get('https://api.github.com/repos/fongmi/Release/contents/release').then(res => {
        let liItemLeanback = '';
        let liItemLeanbackRecommend = ''; //📺电视版apk推荐
        let liItemMobile = '';
        let liItemMobileRecommend = ''; //📱手机版apk推荐
        let downloads = res.data;
        let downloadList = document.querySelector('#download ul');

        axios.get('https://api.github.com/repos/fongmi/TV/commits?path=release').then(commitRes => {
            // console.log(commitRes.data[0])
            if (commitRes.data && commitRes.data.length > 0) {
                let updated_at = commitRes.data[0].commit.committer.date
                // console.log("----------------------------updated_at=" + updated_at)
                downloads.forEach(item => {
                    if (item.name.endsWith(".apk")) {
                        if (item.name.includes("leanback")) {
                            if (isRecommend(item.name)) {
                                liItemLeanbackRecommend = getTemplate(item.name, item.download_url, item.size, updated_at);
                            } else {
                                liItemLeanback += getTemplate(item.name, item.download_url, item.size, updated_at);
                            }
                        } else {
                            if (isRecommend(item.name)) {
                                liItemMobileRecommend = getTemplate(item.name, item.download_url, item.size, updated_at);
                            } else {
                                liItemMobile += getTemplate(item.name, item.download_url, item.size, updated_at);
                            }
                        }
                    }
                })
                if (liItemLeanbackRecommend) {
                    liItemLeanback = liItemLeanbackRecommend + liItemLeanback;
                }
                if (liItemMobileRecommend) {
                    liItemMobile = liItemMobileRecommend + liItemMobile;
                }
                downloadList.innerHTML = `
            <h2 class="ml-2 text-3x3 font-bold my-0"><li><h2>📱手机版</h2></li><hr></h2>
            ${liItemMobile} 
            <h2 class="ml-2 text-3x3 font-bold my-0"><li><h2>📺电视版</h2></li><hr></h2>
            ${liItemLeanback}
            `;
            }
        })
    }).catch(err => {
        console.log(err)
        Swal.fire({
            icon: 'error',
            title: '下载资源请求失败',
            showConfirmButton: false,
            timer: 1000
        })
    })

    // 方法二：查看github的Releases发版记录
    // axios.get('https://api.github.com/repos/fongmi/TV/releases/latest').then(res => {
    //     let liItemLeanback = '';
    //     let liItemLeanbackRecommend = ''; //📺电视版apk推荐
    //     let liItemMobile = '';
    //     let liItemMobileRecommend = ''; //📱手机版apk推荐
    //     let downloads = res.data.assets;
    //     let downloadList = document.querySelector('#download ul');
    //     downloads.forEach(item => {
    //         if (item.name.endsWith(".apk")) {
    //             if (item.name.includes("leanback")) {
    //                 if (isRecommend(item.name)) {
    //                     liItemLeanbackRecommend = getTemplate(item.name, item.browser_download_url, item.size, item.updated_at);
    //                 } else {
    //                     liItemLeanback += getTemplate(item.name, item.browser_download_url, item.size, item.updated_at);
    //                 }
    //             } else {
    //                 if (isRecommend(item.name)) {
    //                     liItemMobileRecommend = getTemplate(item.name, item.browser_download_url, item.size, item.updated_at);
    //                 } else {
    //                     liItemMobile += getTemplate(item.name, item.browser_download_url, item.size, item.updated_at);
    //                 }
    //             }
    //         }
    //     })
    //     if (liItemLeanbackRecommend) {
    //         liItemLeanback = liItemLeanbackRecommend + liItemLeanback;
    //     }
    //     if (liItemMobileRecommend) {
    //         liItemMobile = liItemMobileRecommend + liItemMobile;
    //     }
    //     downloadList.innerHTML = `
    //         <h2 class="ml-2 text-3x3 font-bold my-0"><li><h2>📱手机版</h2></li><hr></h2>
    //         ${liItemMobile}
    //         <h2 class="ml-2 text-3x3 font-bold my-0"><li><h2>📺电视版</h2></li><hr></h2>
    //         ${liItemLeanback}
    //         `;
    // }).catch(err => {
    //     console.log(err)
    //     Swal.fire({
    //         icon: 'error',
    //         title: '下载资源请求失败',
    //         showConfirmButton: false,
    //         timer: 1000
    //     })
    // })

</script>

<!-- 点击特效 -->
<script>
        (function () {
            let coreSocialistValues = ["💖", "富强", "💜", "民主", "💙", "文明", "💚", "和谐", "💛", "自由", "🤎", "平等", "💗", "公正", "💜", "法治", "💖", "爱国", "💚", "敬业", "💚", "诚信", "💖", "友善"];
            let index = Math.floor(Math.random() * coreSocialistValues.length);
            document.body.addEventListener('click', function (e) {
                if (e.target.tagName == 'A') {
                    return;
                }
                let x = e.pageX
                let y = e.pageY
                let span = document.createElement('span');
                span.textContent = coreSocialistValues[index];
                index = (index + 1) % coreSocialistValues.length;//取模循环
                span.style.cssText = ['z-index: 9999999; position: absolute; font-weight: bold; color: #ff6651; top: ', y - 20, 'px; left: ', x, 'px;'].join('');
                document.body.appendChild(span);
                animate(span);
            });
            function animate(el) {//动画
                let i = 0
                let top = parseInt(el.style.top)
                let id = setInterval(frame, 24);
                function frame() {//帧
                    if (i > 180) {
                        clearInterval(id);
                        el.parentNode.removeChild(el);
                    } else {
                        i += 2;
                        el.style.top = top - i + 'px';
                        el.style.opacity = (180 - i) / 180;
                    }
                }
            }
        }());
</script>

<!-- 点击复制 -->
<script>
    let swiper = new Swiper('.swiper-container', {
        slidesPerView: 1,
        spaceBetween: 10,
        loop: true,
        pagination: {
            el: '.swiper-pagination',
            clickable: true,
        }, autoplay: {
            delay: 3000, // 设置轮播切换时间为3秒
        },
    });
</script>
<script>
    const cards = document.querySelectorAll('.grid [data-config]');

    cards.forEach(card => {
        card.addEventListener('click', () => {
            const configValue = card.getAttribute('data-config');

            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(configValue)
                    .then(() => {
                        Swal.fire({
                            icon: 'success',
                            title: '复制成功',
                            showConfirmButton: false,
                            timer: 1000
                        });
                    })
                    .catch(err => {
                        fallbackCopyTextToClipboard(configValue);
                    });
            } else {
                fallbackCopyTextToClipboard(configValue);
            }
        });
    });

    function fallbackCopyTextToClipboard(text) {
        const textarea = document.createElement('textarea');
        textarea.value = text;
        textarea.style.position = 'fixed';
        document.body.appendChild(textarea);

        textarea.focus();
        textarea.select();

        try {
            const successful = document.execCommand('copy');
            const msg = successful ? 'successful' : 'unsuccessful';
            console.log('Fallback: Copying text command was ' + msg);
            if (successful) {
                Swal.fire({
                    icon: 'success',
                    title: '复制成功',
                    showConfirmButton: false,
                    timer: 1000
                });
            } else {
                Swal.fire({
                    icon: 'error',
                    title: '复制失败',
                    showConfirmButton: false,
                    timer: 1000
                });
            }
        } catch (err) {
            console.error('Fallback: Oops, unable to copy', err);
            Swal.fire({
                icon: 'error',
                title: '复制失败',
                showConfirmButton: false,
                timer: 1000
            });
        }

        document.body.removeChild(textarea);
    }

</script>

<!-- <script type="text/javascript">
    window.onload = function () {
        //屏蔽键盘事件
        document.onkeydown = function () {
            var e = window.event || arguments[0];
            //F12
            if (e.keyCode == 123) {
                return false;
                //Ctrl+Shift+I
            } else if ((e.ctrlKey) && (e.shiftKey) && (e.keyCode == 73)) {
                return false;
                //Shift+F10
            } else if ((e.shiftKey) && (e.keyCode == 121)) {
                return false;
                //Ctrl+U
            } else if ((e.ctrlKey) && (e.keyCode == 85)) {
                return false;
            }
        };
        //屏蔽鼠标右键
        document.oncontextmenu = function () {
            return false;
        }
    }
</script> -->

<!-- 音乐插件 开始-->
<!-- <script src="https://myhkw.cn/player/js/jquery.min.js" type="text/javascript"></script>
<script src="https://myhkw.cn/api/player/demo" id="myhk" key="demo" skin="player" au="0" lr="r" m="1" +></script> -->
<!-- 音乐插件 结束-->

</html>
